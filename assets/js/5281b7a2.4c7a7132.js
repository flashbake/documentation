"use strict";(self.webpackChunkflashbake_doc=self.webpackChunkflashbake_doc||[]).push([[927],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return f}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),c=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=c(r),f=n,d=h["".concat(s,".").concat(f)]||h[f]||u[f]||o;return r?a.createElement(d,i(i({ref:t},p),{},{components:r})):a.createElement(d,i({ref:t},p))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},1527:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var a=r(7462),n=r(3366),o=(r(7294),r(3905)),i=["components"],l={},s="Architecture",c={unversionedId:"architecture",id:"architecture",title:"Architecture",description:"Normal Transaction Flow",source:"@site/docs/architecture.md",sourceDirName:".",slug:"/architecture",permalink:"/docs/architecture",draft:!1,editUrl:"https://github.com/flashbake/documentation/docs/architecture.md",tags:[],version:"current",frontMatter:{},sidebar:"flashbakeSidebar",previous:{title:"Flashbake",permalink:"/docs/intro"},next:{title:"Use the Public Relay",permalink:"/docs/public-relay"}},p={},u=[{value:"Normal Transaction Flow",id:"normal-transaction-flow",level:2},{value:"Flashbake Transaction Flow",id:"flashbake-transaction-flow",level:2}],h={toc:u};function f(e){var t=e.components,l=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"architecture"},"Architecture"),(0,o.kt)("h2",{id:"normal-transaction-flow"},"Normal Transaction Flow"),(0,o.kt)("p",null,"This is the normal lifecycle of a Tezos transaction:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Normal Flow",src:r(1966).Z,width:"821",height:"451"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"User submits a transaction to a Tezos node actings as RPC gateway: it could be a local node, or a backend node operated by the Defi or NFT Dapp,"),(0,o.kt)("li",{parentName:"ol"},"The transaction is added to the mempool and propagates via the peer-to-peer network,"),(0,o.kt)("li",{parentName:"ol"},"The baker bakes a block and injects it to its node,"),(0,o.kt)("li",{parentName:"ol"},"The block gets propagated to the Tezos network.")),(0,o.kt)("p",null,"We can see that this transcation is ",(0,o.kt)("strong",{parentName:"p"},"not private")," before getting included in a block: the RPC Gateway, the baker and anyone observing the mempool can see the transaction."),(0,o.kt)("h2",{id:"flashbake-transaction-flow"},"Flashbake Transaction Flow"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Flashbake Flow",src:r(2425).Z,width:"811",height:"631"})),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"User submits a transaction to the ",(0,o.kt)("strong",{parentName:"li"},"Flashbake Relay"),". It could be the relay hosted here (",(0,o.kt)("inlineCode",{parentName:"li"},"https://relay.flashbake.xyz"),") or the user may run their own,"),(0,o.kt)("li",{parentName:"ol"},"The Flashbake Relay requires a Tezos node running locally. For all intents and purposes (",(0,o.kt)("strong",{parentName:"li"},"except injection"),"), the Flasbake Relay acts as a Tezos Node and forwards all RPC queries to it,"),(0,o.kt)("li",{parentName:"ol"},"The injection operation is intercepted. The node queries the Registry Contact for the next flashbake-capable baker's endpoint address, then forwards the operation to it,"),(0,o.kt)("li",{parentName:"ol"},"The flashbake-capable baker (or ",(0,o.kt)("strong",{parentName:"li"},"Flashbaker"),") queries the Flashbake Endpoint for Flashbake operations and uses them, as well as its node mempool, to assemble a block,"),(0,o.kt)("li",{parentName:"ol"},"The baker bakes a block and injects it to its node,"),(0,o.kt)("li",{parentName:"ol"},"The block gets propagated to the Tezos network.")),(0,o.kt)("p",null,"The operation is kept private from anyone except the relay and the baker, until the block is propagated. Assuming the user is running their own relay, the operation is private from ",(0,o.kt)("strong",{parentName:"p"},"everyone but the baker"),"."),(0,o.kt)("p",null,"It is possible to run this entire flow in isolation in a private network. For more information, see our ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/flashbake/prototype"},"prototype repo"),"."))}f.isMDXComponent=!0},2425:function(e,t,r){t.Z=r.p+"assets/images/flashbake_flow-9b92c1f50da8ac0ae3ac1b66c082db6a.svg"},1966:function(e,t,r){t.Z=r.p+"assets/images/normal_transaction_flow.drawio-915098eac8753758b730b82f80d9ed89.svg"}}]);